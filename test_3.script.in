topology
2 2 2 2 2 2 2 2 2 2 2 2

# 'first_node' is the name (fixed) of first implicit node.
# Next line will specify the positions. The elderships are all 0.

first_node
1 1 1 0 1 0 1 1 1 0 0 1

wait_msec 200

print_info first_node

# 'join' will make a node to query and obtain a reservation at the highest possible level.
#   A maximum level may be specified.
#   Then add a neighbor to the same node choosing randomly lower positions.

join n1 to first_node max_level 10

wait_msec 200

print_info first_node

print_info n1

join n2 to n1 max_level 10

wait_msec 200

join n3 to n1 max_level 10

wait_msec 200

join n4 to n3 max_level 10

wait_msec 200

join n5 to n3 max_level 10

wait_msec 200

join n6 to first_node max_level 10

wait_msec 200

join n7 to n5 max_level 10

wait_msec 200

join n8 to n6 max_level 10

wait_msec 200

join n9 to n3 max_level 10

wait_msec 200

join n10 to n6 max_level 10

wait_msec 200

join n11 to n8 max_level 10

wait_msec 200

join n12 to n2 max_level 10

wait_msec 200

join n13 to n11 max_level 10

wait_msec 200

join n14 to n11 max_level 10

wait_msec 200

join n15 to n13 max_level 10

wait_msec 200

join n16 to n4 max_level 10

wait_msec 200

join n17 to n6 max_level 10

wait_msec 200

join n18 to n15 max_level 10

wait_msec 200

join n19 to n4 max_level 10

wait_msec 200

join n20 to n13 max_level 10

wait_msec 200

join n21 to n6 max_level 10

wait_msec 200

join n22 to n2 max_level 10

wait_msec 200

join n23 to n21 max_level 10

wait_msec 200

join n24 to n16 max_level 10

wait_msec 200

join n25 to n17 max_level 10

wait_msec 200

join n26 to n20 max_level 10

wait_msec 200

join n27 to n25 max_level 10

wait_msec 200

join n28 to n9 max_level 10

wait_msec 200

join n29 to n10 max_level 10

wait_msec 200

join n30 to n19 max_level 10

wait_msec 200

join n31 to n9 max_level 10

wait_msec 200

join n32 to n8 max_level 10

wait_msec 200

join n33 to n5 max_level 10

wait_msec 200

join n34 to n11 max_level 10

wait_msec 200

# request a place to n34 at level 12. it should be granted.

request_reserve to n34 level 12
expect ok

# request a place to n12 at level 12. it should have no space left, because of bookings.

request_reserve to n12 level 12
expect saturated_gnode

